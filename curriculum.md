한국어 구다사이~~
키움 REST + 트레이딩 학습용 커리큘럼 (안티그래비티 지시서)
전체 원칙
절대 한 번에 모든 기능을 구현하지 말 것.

각 단계는 개념 설명 → 최소 예제 코드 → 내가 직접 만져볼 시간 구조로 진행할 것.

모든 API 호출은 모의투자 서버에서만 먼저 연습할 것.

내가 “다음 단계로 가자”고 말하기 전에는, 현재 단계의 Task만 수행할 것.

각 Task가 끝날 때마다 변경된 파일과 내용 요약을 먼저 설명할 것.

1단계: 모의투자 REST API 세팅 + 서버 연결
목표: 접근 토큰 발급 및 모의투자 서버와의 기본 통신 확인.

요구 사항
Task 1-1

모의투자 REST API를 쓰기 위한 준비사항을 정리해줘.

앱키/시크릿

모의투자 도메인

OAuth2 토큰 개념, 만료/갱신 흐름

Task 1-2

kiwoom_rest_auth.py 파일을 만들고,

get_access_token() 함수 하나만 구현해줘.

앱키/시크릿은 .env 또는 설정 파일에서 읽도록 설계해줘.

예외 상황(토큰 실패, HTTP 에러)에 대한 최소한의 처리도 포함해줘.

Task 1-3

test_connection.py 파일을 만들고,

get_access_token()으로 토큰을 받은 뒤,

모의투자 서버에 간단한 요청(예: 서버 시간/단일 종목 시세 등)을 1회 보내는 예제를 작성해줘.

요청/응답 로그를 콘솔에 보기 좋게 출력해줘.

2단계: 기초 데이터 내려받기 (전일종가, 거래량, 투자주체 등)
목표: 단일 종목에 대해 기본적인 시세/투자주체 데이터를 DataFrame으로 받는 함수 만들기.

요구 사항
Task 2-1

키움 REST에서 일봉/분봉/체결/투자주체 관련 핵심 엔드포인트와 파라미터를 표로 정리해줘.

종목코드, 시장구분, 조회 기간, 연속조회 키 등

Task 2-2

kiwoom_data.py 파일을 만들고, 아래 함수 시그니처와 docstring만 먼저 정의해줘.

get_daily_ohlcv(symbol, start, end)

get_investor_volume(symbol, date)

각 함수가 어떤 데이터를 반환할지(컬럼 구조, 타입)를 주석으로 설명해줘.

Task 2-3

위 함수 중 get_daily_ohlcv 하나만 먼저 실제 구현해줘.

반환 타입은 pandas DataFrame.

인덱스/컬럼 이름과 타입을 명확히 지정해줘.

간단한 테스트 코드(예: 삼전/현대차 한 종목)를 만들어서, DataFrame 상단 5줄을 출력하는 예제를 포함해줘.

3단계: 데이터 + 지표/툴 실습 (많이많이)
목표: 받아온 데이터를 pandas로 가공하고, 기본 지표를 계산하는 루틴 익히기.

요구 사항
Task 3-1

notebooks/01_basic_eda.ipynb 노트북을 만들고,

get_daily_ohlcv로 가져온 DataFrame에 대해

수익률 컬럼 추가

5일 / 20일 이동평균 계산

종가와 이동평균 그래프를 그리는 셀을 작성해줘.

Task 3-2

pandas를 “트레이딩 관점”에서 어떻게 쓰는지 요약한 Markdown 노트를 하나 만들어줘.

예: 컬럼 추가, 필터링, 그룹바이, 리샘플링, 롤링 윈도우 등

실제로 트레이딩에 쓸 수 있는 예시(예: 단순 모멘텀, 변동성 계산)를 짧게 넣어줘.

Task 3-3

두 개 이상의 종목(예: KOSPI ETF + 관심 종목)을 하나의 DataFrame으로 합쳐서,

수익률, 상관계수, 변동성 등을 계산하는 예제를 추가 노트북으로 만들어줘.

4단계: 계좌 조회/관리 (모의투자 기준)
목표: 내 계좌 상태를 정기적으로 조회할 수 있는 함수 세트 만들기.

요구 사항
Task 4-1

키움 REST 문서에서 계좌/잔고/체결 내역 관련 엔드포인트를 정리해줘.

필요한 파라미터, 응답 필드, 모의/실투 구분 주의사항 포함.

Task 4-2

kiwoom_account.py 파일을 만들고, 아래 함수 시그니처와 docstring을 설계해줘.

get_account_summary()

get_positions()

get_order_history()

각 함수가 반환할 구조(dict 또는 DataFrame)를 명확히 설명해줘.

Task 4-3

get_account_summary() 함수만 먼저 실제 구현해줘.

예수금, 평가금액, 손익 등을 요약해서 반환.

이를 호출해서 콘솔에 보기 좋게 출력하는 짧은 예제 스크립트를 하나 작성해줘.

5단계: 주문 전송 + 주문 관리 (모의투자만)
목표: 소액 테스트 주문을 보내고, 상태를 확인/취소까지 해보는 루틴 만들기.

요구 사항
Task 5-1

매수/매도 공통으로 사용할 주문 payload 구조를 정리해줘.

필수 필드(종목코드, 수량, 가격, 주문유형 등)와 주의사항 설명.

Task 5-2

kiwoom_order.py 파일을 만들고, 아래 함수 시그니처와 예외 처리 방식을 설계해줘.

place_order(side, symbol, qty, price, order_type)

cancel_order(order_id)

Task 5-3

notebooks/02_single_order_test.ipynb를 만들고,

주문 전 계좌 요약 조회

모의투자 서버에 소량 시장가 매수 주문 1건 전송

주문 후 계좌 요약/포지션 변화를 확인

필요하면 주문 취소 예제도 포함
하는 흐름을 구현해줘.

6단계: 투자 결과를 구글 스프레드시트에 기록
목표: 거래 결과 요약을 Google Sheets에 자동으로 적재하는 파이프라인 만들기.

요구 사항
Task 6-1

Google Sheets API를 Python에서 사용하는 방법을 요약해줘.

서비스 계정, credentials JSON, 권한 범위, 스프레드시트 ID/시트 이름/Range 개념 정리.

Task 6-2

google_sheets_client.py 파일을 만들고,

append_trading_log(rows: list[list[Any]]) 함수를 설계/구현해줘.

특정 시트의 마지막 행 아래에 데이터를 추가하는 동작을 하도록 해줘.

Task 6-3

notebooks/03_export_to_sheets.ipynb를 만들고,

get_order_history()로 최근 N건 체결 내역을 가져온 뒤,

[날짜, 종목, 수량, 가격, 수수료, 손익] 포맷으로 가공해서

Google Sheets에 append_trading_log로 추가하는 예제를 작성해줘.

진행 속도에 대한 추가 지시
각 “단계(1~6)”는 내가 명시적으로 “다음 단계로 가자”고 요청하기 전까지 진행하지 마.

단계 안에서도 Task를 한 개씩만 수행하고, 내가 코드를 읽고 실습할 시간을 충분히 가진 뒤에 다음 Task로 넘어가.

각 Task가 끝날 때마다:

변경된 파일 목록

주요 함수/클래스 설명

앞으로 내가 직접 해보면 좋을 실습 아이디어
를 짧게 요약해서 알려줘.